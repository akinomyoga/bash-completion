# Linux route(8) completion                                -*- shell-script -*-

[[ $OSTYPE == *linux* ]] || return 1

_comp_cmd_route()
{
    local cur prev words cword comp_args
    _comp_initialize -- "$@" || return

    if [[ $prev == dev ]]; then
        _comp_compgen_available_interfaces
        return
    fi

    # Remove already given options from completions
    local opt
    for opt in add del -host -net netmask metric mss window irtt reject mod \
        dyn reinstate dev default gw; do
        _comp_has_arg -Ni "$opt" || COMPREPLY+=("$opt")
    done

    ((${#COMPREPLY[@]})) &&
        _comp_compgen -- -W '"${COMPREPLY[@]}"'
} &&
    complete -F _comp_cmd_route route

# ex: filetype=sh
